!function(e,t,r,o){"use strict";r===o&&(r=e);var s,n,a=e.Hydra.bus;n=function(e){var t="URL: "+e.sUrl+" - Method: "+e.sMethod+" - Data: "+e.sData;return escape(t)},s=function(e){var r=e;this.responseTEXT=function(){return r.responseText},this.responseXML=function(){return r.responseXML},this.responseHTML=function(){var e=null,o=null,s=0,n=0;try{for(e=t.createElement("div"),o=t.createDocumentFragment(),e.innerHTML=r.responseText,n=e.childNodes.length;n>s;s++)o.appendChild(e.childNodes[s]);return o}catch(a){return{e_r_e_r_r_o_r_s_t_a_t_u_s_a_j_a_x:a.message}}},this.responseJSON=function(){try{return JSON.parse(r.responseText)}catch(e){return{e_r_e_r_r_o_r_s_t_a_t_u_s_a_j_a_x:e.message}}},this.getStatusNumber=function(){return r.status},this.getStatusMessage=function(){return r.statusText}};var i=function(){this.oHttp=this.getHTTPObject(),this.sUrl="",this.bAsync=!0,this.sLastError="",this.sMethod=i._methods.POST,this.sDataType=i._dataTypes.TEXT,this.sData="",this.bInProcess=!1,this.onBeforeSend=function(){},this.onReady=function(){},this.onError=function(){},this.onComplete=function(){},this.oCache=null,this.nTimeout=1e4,this.nIdTimeout=-1};i._methods={GET:"GET",POST:"POST"},i._dataTypes={TEXT:"TEXT",XML:"XML",JSON:"JSON",HTML:"HTML"},i._acceptType={TEXT:"text/plain",XML:"text/xml",HTML:"text/html",JSON:"application/json","*":"*/*"},i.errors={notSupported:"jsFramework Error:\nThis browser doesn't support the XMLHttpRequest object.",xmlParserError:"XML parser error or not a valid XML file",jsonParserError:"JSON parser error or not a valid JSON file",htmlParserError:"HTML parser error or not a valid HTML file"},i.prototype.getHTTPObject=function(){var e=null;try{e=new XMLHttpRequest}catch(t){return r.Hermes.logger.addError(new r.Hermes.error(r.Hermes.level.DEBUG,"Ajax.getHTTPObject",i.errors.notSupported,"Ajax.js")),!1}return e},i.prototype.fpOnError=function(e,t,o,s){var i=this,c=null;switch(o){case 403:return r.Maintenance.actionsPostLogout(),!1;case 404:c=new ResourceNotFound(n(i),"Ajax.js");break;case 420:a.publish("forced-updates","client-version");break;case 421:a.publish("forced-updates","code-version");break;case 200:case 0:case 502:case 500:return!1;default:c=new ServerError("Undefined server error. "+n(i)+" - Error message: "+t+" - Status message:"+s+" Response text: "+e,"Ajax.js",null,o)}return r.Hermes.logger.addError(c),!1},i.prototype.setup=function(e){var t=this;return t.sUrl=e.url||"",t.bAsync="boolean"==typeof e.async?e.async:!0,t.sMethod=e.method?e.method.toUpperCase():i._methods.POST,t.sData=t.serializeData(e.data||""),t.sDataType=e.dataType?e.dataType.toUpperCase():i._dataTypes.TEXT,t.switchToSecureProtocolIfIsAvailable(),t.onBeforeSend=e.beforeSend||function(){},t.onReady=e.success||function(){},t.onError=e.error?function(r,o,s,n){e.error.call(t,r,o,s,n),t.fpOnError.call(t,r,o,s,n)}:t.fpOnError,t.onComplete=e.complete||function(){},t.oCache="undefined"!=typeof e.cache?e.cache:null,t.nTimeout=e.timeout>0?e.timeout:t.nTimeout,t.sMethod===i._methods.GET&&t.sData.length>0&&(t.sUrl+="?"+t.sData),t},i.prototype.serializeData=function(e){return"string"==typeof e?e:this._serializeObject(e)},i.prototype._serializeObject=function(e){return r.Utilities.serializeObject(e)},i.prototype.switchToSecureProtocolIfIsAvailable=function(){var e=this;return e.shouldChangeToSsl()?(e.sUrl="https://"+t.domain+"/"+e.sUrl.replace(/^\/\s*/,""),!0):!1},i.prototype.isResponseCorrect=function(){var e=this;try{var t=new r.ResponseAjax(e.oHttp)["response"+e.sDataType]();return e.sDataType===i._dataTypes.XML&&null===t?(e.sLastError=i.errors.xmlParserError,r.Hermes.logger.addError(new ThrowError("Class: Ajax, Method: isResponseCorrect. "+i.errors.xmlParserError,"Ajax.js")),!1):e.sDataType===i._dataTypes.JSON&&"undefined"!=typeof t.e_r_e_r_r_o_r_s_t_a_t_u_s_a_j_a_x?(e.sLastError=i.errors.jsonParserError,r.Hermes.logger.addError(new ThrowError("Class: Ajax, Method: isResponseCorrect. "+i.errors.jsonParserError,"Ajax.js")),!1):e.sDataType===i._dataTypes.HTML&&"undefined"!=typeof t.e_r_e_r_r_o_r_s_t_a_t_u_s_a_j_a_x?(e.sLastError=i.errors.htmlParserError,r.Hermes.logger.addError(new ThrowError("Class: Ajax, Method: isResponseCorrect. "+i.errors.htmlParserError,"Ajax.js")),!1):!0}catch(o){return e.sLastError=o.message,!1}},i.prototype.checkReadyOrError=function(){var e=null,t=this;200===t.oHttp.status?(t.nTimeout&&clearTimeout(t.nIdTimeout),t.isResponseCorrect()?(e=new r.ResponseAjax(t.oHttp)["response"+t.sDataType](),null!==t.oCache&&t.oCache.addAjaxResponse(t.sUrl+"("+t.sData+t.sDataType+")",e),t.getDebugInfo(e),t.onReady(e),e=null):(e=new r.ResponseAjax(t.oHttp).responseTEXT(),t.getDebugInfo(e),t.onError(e,t.sLastError,t.oHttp.status,t.oHttp.statusText))):(e=new r.ResponseAjax(t.oHttp).responseTEXT(),t.getDebugInfo(e),t.onError(e,"Server Error",t.oHttp.status,t.oHttp.statusText))},i.prototype.getDebugInfo=function(e){e&&"undefined"!=typeof e.debug&&r.GUI.oDebug.addAjaxItem(e.debug_id,e.debug)},i.prototype.setHeaderPost=[],i.prototype.setHeaderPost.GET=function(e){e.oHttp.setRequestHeader("Accept",i._acceptType[e.sDataType])},i.prototype.setHeaderPost.POST=function(e){e.oHttp.setRequestHeader("Accept",i._acceptType[e.sDataType]),e.oHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},i.prototype.wichMethod=[],i.prototype.wichMethod.GET=function(){return null},i.prototype.wichMethod.POST=function(e){return e.sData},i.prototype.workAsyncMode=[],i.prototype.workAsyncMode[0]=function(e){var t=this;e.onBeforeSend(),e.nTimeout&&(e.nIdTimeout=setTimeout(function(){e.abort(),r.Hermes.logger.addError(new UnreacheableServer(n(t)+" Timeout Error "," Ajax.js"))},e.nTimeout)),e.oHttp.send(e.wichMethod[e.sMethod](e)),e.bInProcess=!1,e.checkReadyOrError()},i.prototype.workAsyncMode[1]=function(e){e.oHttp.onreadystatechange=function(){4===e.oHttp.readyState&&(e.onComplete(new r.ResponseAjax(e.oHttp)["response"+e.sDataType]()),e.bInProcess=!1,e.checkReadyOrError())},e.bInProcess=!0,e.onBeforeSend(),e.nTimeout&&(e.nIdTimeout=setTimeout(function(){e.abort()},e.nTimeout)),e.oHttp.send(e.wichMethod[e.sMethod](e))},i.prototype.call=function(){var e="",t=this,o=null!==sessionStorage.getItem("rebuildAjax"),s=r.Debug.isActive(),n=t.sUrl;if(s&&(n+=(n.indexOf("?")>-1?"&":"?")+"debug=1"),o)n+=(n.indexOf("?")>-1?"&":"?")+"rebuild=1";else if(null!==t.oCache&&(e=t.oCache.getAjaxResponse(n+"("+t.sData+t.sDataType+")")))return t.onReady(e),this;return t.oHttp&&!t.bInProcess?(t.bInProcess=!0,t.oHttp.open(t.sMethod,n,t.bAsync),t._setUpCredentials(),t.setHeaderPost[t.sMethod](t),t.workAsyncMode[Number(t.bAsync)](t)):t},i.prototype._setUpCredentials=function(){var e=this;e.shouldChangeToSsl()&&e.oHttp instanceof XMLHttpRequest&&(e.oHttp.withCredentials=!0)},i.prototype.shouldChangeToSsl=function(){return"undefined"==typeof e.oApplicationConfig?!1:e.oApplicationConfig.is_available_ssl&&!e.oApplicationConfig.is_using_ssl},i.prototype.abort=function(){this.oHttp.abort()},i.instance=null,i.getInstance=function(){null===i.instance&&(i.instance=new r.Ajax);try{return i.instance}catch(e){}finally{i.getInstance=function(){return i.instance}}},i.whiteAPICall=function(e,t){var o=null,s=r.Globals.APIWebServiceProtocol+"://"+r.Globals.APIWebServiceDomain+":"+r.Globals.APIWebServicePort+"/",n=null,a="",i=function(){},c=null,p=null,u=function(e){c(e.result)},l=function(e){p(e.error)};return"undefined"==typeof e||"undefined"==typeof e.apiCall?!1:(o=new r.Ajax,n=e.apiCall,a=JSON.stringify(n),c=e.success||i,p=e.error||i,t=t===!0,o.setup({url:s,async:t,method:e.method||"GET",cache:null,data:"JSON="+a,dataType:"json",timeout:6e4,success:u,error:l}).call(),o)},i.asyncCallAPI=function(e){return i.whiteAPICall(e,!0)},i.syncCallAPI=function(e){return i.whiteAPICall(e,!1)},r.ResponseAjax=s,r.Ajax=i}(window,document,window.Namespace?window.Namespace:{}),function(e,t,r){function o(e){var t=!1;return(e instanceof String||"string"==typeof e)&&(t=!0),t}"undefined"==typeof r&&(r=e);var s=function(){this.aData=[]};s.prototype={add:function(e,t){var r;return(o(e)===!1||o(t)===!1)&&(e=String(e),t=String(t)),r=encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E"),this.aData.push(e+"="+r),this},toString:function(){return this.aData.join("&")}},r.AjaxDataObject=s}(window,document,window.Namespace?window.Namespace:{});